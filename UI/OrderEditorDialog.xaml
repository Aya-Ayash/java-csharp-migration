<Window x:Class="aim.legacy.UI.OrderEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Order Editor"
        Width="800"
        Height="600"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Top: Customer selection -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Customer:" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <ComboBox x:Name="CustomerComboBox" Width="300" SelectionChanged="CustomerComboBox_SelectionChanged"/>
        </StackPanel>

        <!-- Center left: Lines table + buttons -->
        <DockPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,0">
            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,10,0,0">
                <Button Content="Add Line" Width="90" Margin="0,0,10,0" Click="AddLineButton_Click"/>
                <Button Content="Remove Line" Width="90" Click="RemoveLineButton_Click"/>
            </StackPanel>
            <DataGrid x:Name="LinesDataGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Product" Binding="{Binding ProdName}" Width="*"/>
                    <DataGridTextColumn Header="Quantity" Binding="{Binding Qty}" Width="80"/>
                    <DataGridTextColumn Header="Unit Price" Binding="{Binding PriceDisplay}" Width="80"/>
                    <DataGridTextColumn Header="Line Total" Binding="{Binding LineTotalDisplay}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>
        </DockPanel>

        <!-- Center right: Totals + Status -->
        <StackPanel Grid.Row="1" Grid.Column="1" Width="220">
            <Border BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
                <Border.Child>
                    <StackPanel>
                        <TextBlock Text="Totals" FontWeight="Bold" Margin="0,0,0,8"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Subtotal:" Margin="0,4"/>
                            <TextBlock x:Name="SubtotalLabel" Grid.Row="0" Grid.Column="1" Text="$0.00" Margin="0,4"/>
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Discount:" Margin="0,4"/>
                            <TextBlock x:Name="DiscountLabel" Grid.Row="1" Grid.Column="1" Text="$0.00" Margin="0,4"/>
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Tax:" Margin="0,4"/>
                            <TextBlock x:Name="TaxLabel" Grid.Row="2" Grid.Column="1" Text="$0.00" Margin="0,4"/>
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Total:" FontWeight="Bold" Margin="0,4"/>
                            <TextBlock x:Name="TotalLabel" Grid.Row="3" Grid.Column="1" Text="$0.00" FontWeight="Bold" FontSize="14" Margin="0,4"/>
                        </Grid>
                    </StackPanel>
                </Border.Child>
            </Border>
            <Border BorderBrush="Gray" BorderThickness="1" Padding="10">
                <Border.Child>
                    <StackPanel>
                        <TextBlock Text="Status" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBox x:Name="StatusTextBox" 
                                 IsReadOnly="True" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True"
                                 Height="120"
                                 VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border.Child>
            </Border>
        </StackPanel>

        <!-- Bottom: Save, Cancel -->
        <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Save" Width="80" Margin="0,0,10,0" Click="SaveButton_Click" IsDefault="True"/>
            <Button Content="Cancel" Width="80" IsCancel="True" Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
